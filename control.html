<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VIP å°æ§å°</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js"></script>

  <style>
    :root {
      --bg: #050914;
      --panel: #0e1a33;
      --gold: #ffd700;
      --blue: #00bfff;
      --danger: #ff7676;
    }

    body {
      margin: 0;
      padding: 20px;
      background: radial-gradient(circle at top, #12284a 0%, #050914 70%);
      color: #fff;
      font-family: "Microsoft JhengHei", sans-serif;
      min-height: 100vh;
      box-sizing: border-box;
    }

    h1 {
      text-align: center;
      color: var(--gold);
      letter-spacing: 4px;
      margin-bottom: 10px;
    }

    .subtitle {
      text-align: center;
      color: #ccc;
      margin-bottom: 24px;
      font-size: 0.9rem;
    }

    .panel {
      max-width: 520px;
      margin: 0 auto;
      background: rgba(0,0,0,0.6);
      border: 1px solid rgba(255,215,0,0.5);
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 0 25px rgba(255,215,0,0.3);
    }

    .status {
      text-align: center;
      font-size: 0.9rem;
      margin-bottom: 16px;
      color: #aaa;
    }

    .btn {
      width: 100%;
      padding: 16px;
      margin-bottom: 12px;
      border: none;
      border-radius: 999px;
      font-size: 1.05rem;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.1s;
    }

    .btn:active {
      transform: scale(0.97);
    }

    .btn-dim {
      background: linear-gradient(90deg, #666, #333);
      color: #fff;
    }

    .btn-gm {
      background: linear-gradient(90deg, var(--blue), #004080);
      color: #fff;
      box-shadow: 0 0 20px rgba(0,191,255,0.5);
    }

    .btn-chairman {
      background: linear-gradient(90deg, var(--gold), #a88600);
      color: #000;
      box-shadow: 0 0 20px rgba(255,215,0,0.6);
    }

    .btn-danger {
      background: linear-gradient(90deg, var(--danger), #7a1f1f);
      color: #fff;
    }

    .hint {
      text-align: center;
      font-size: 0.8rem;
      color: #888;
      margin-top: 10px;
    }
  </style>
</head>

<body>

<h1>VIP å°æ§å°</h1>
<div class="subtitle">
  æ­¤é é¢åƒ…ä¾›ä¸»æŒ / æŠ€è¡“äººå“¡æ“ä½œ<br/>
  æ§åˆ¶å¤§è¢å¹• VIP å±•æ¼”æµç¨‹
</div>

<div class="panel">
  <div class="status" id="status">ğŸ”„ é€£ç·šä¸­â€¦</div>

  <button class="btn btn-dim" onclick="sendAction('dim_building')">
    â‘  å¤§æ¨“è®Šæš—
  </button>

  <button class="btn btn-gm" onclick="sendAction('play_gm')">
    â‘¡ æ’­æ”¾ç¸½ç¶“ç†æ˜Ÿæ˜Ÿèˆ‡æ˜¥è¯
  </button>

  <button class="btn btn-chairman" onclick="sendAction('play_chairman')">
    â‘¢ æ’­æ”¾è‘£äº‹é•·æ˜Ÿæ˜Ÿèˆ‡æ˜¥è¯
  </button>

  <button class="btn btn-danger" onclick="sendAction('reset_vip')">
    â¹ é‡ç½® / åœæ­¢ï¼ˆé¸ç”¨ï¼‰
  </button>

  <div class="hint">
    âš  è«‹ä¾åºæ“ä½œï¼Œé¿å…é‡è¤‡é»æ“Š
  </div>
</div>

<script>
/* ------------------------------------------------------------------ */
/* MQTT è¨­å®šï¼ˆéœ€èˆ‡ Output å®Œå…¨ä¸€è‡´ï¼‰ */
/* ------------------------------------------------------------------ */
const broker = "broker.emqx.io";
const port = 8084;
const topic = "kgi_event_2025_live_demo_vtaco";
const clientID = "vip_control_" + new Date().getTime();

const client = new Paho.MQTT.Client(broker, port, clientID);
const statusEl = document.getElementById("status");

client.connect({
  useSSL: true,
  onSuccess: () => {
    statusEl.textContent = "ğŸŸ¢ å·²é€£ç·šï¼Œå¯é€²è¡Œæ§åˆ¶";
  },
  onFailure: () => {
    statusEl.textContent = "ğŸ”´ é€£ç·šå¤±æ•—ï¼Œè«‹é‡æ–°æ•´ç†";
  }
});

/* ------------------------------------------------------------------ */
/* ç™¼é€æ§åˆ¶æŒ‡ä»¤ */
/* ------------------------------------------------------------------ */
function sendAction(action) {
  if (!client.isConnected()) {
    alert("å°šæœªé€£ç·šæˆåŠŸ");
    return;
  }

  if (!confirm(`ç¢ºå®šè¦åŸ·è¡Œã€Œ${action}ã€å—ï¼Ÿ`)) return;

  const payload = JSON.stringify({
    type: "vip_control",
    action: action,
    time: Date.now()
  });

  const message = new Paho.MQTT.Message(payload);
  message.destinationName = topic;
  client.send(message);
}
</script>

</body>
</html>
